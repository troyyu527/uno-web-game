(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4759)}])},4759:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(5893),a=r(7294),n=r(1163),i=r(4538),l=r(5753);function o(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[g,p]=(0,a.useState)("");return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:-200},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,s.jsxs)("div",{className:"form-body",children:[(0,s.jsxs)("div",{className:"form-holder",children:[(0,s.jsx)("div",{className:"back",onClick:()=>{e.push("/")},children:"Back"}),(0,s.jsx)("div",{className:"form-content",children:(0,s.jsxs)("div",{className:"form-items",children:[(0,s.jsx)("h3",{children:"Login"}),(0,s.jsx)("p",{children:"Remember to register first before login."}),(0,s.jsxs)("div",{className:"form",children:[g&&(0,s.jsxs)("div",{id:"InfoBanner",children:[(0,s.jsx)("span",{className:"reversed reversedRight",children:(0,s.jsx)("span",{children:"âš "})}),(0,s.jsx)("span",{className:"reversed reversedLeft",children:g})]}),(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsx)("input",{className:"form-control",onChange:e=>{u(e.target.value)},type:"text",name:"username",placeholder:"Username",required:!0})}),(0,s.jsx)("div",{className:"col-md-12",children:(0,s.jsx)("input",{className:"form-control",onChange:e=>{h(e.target.value)},type:"password",name:"password",placeholder:"Password",required:!0})}),(0,s.jsx)("div",{className:"form-button mt-3",style:{display:"flex",justifyContent:"center"},children:(0,s.jsx)("button",{id:"submit",onClick:()=>{c(!0),l.Z.login(d,m).then(t=>{t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data)),c(!1),window.alert("Login successfully. You are redirected to the home page."),r(l.Z.getCurrentUser()),e.push("/"))}).catch(e=>{c(!1),p(e.response.data)})},className:"btn btn-primary",children:"Login"})})]})]})})]}),o&&(0,s.jsx)("div",{className:"notice",children:(0,s.jsx)("p",{children:"Sending Request..."})})]})})}},5753:function(e,t,r){"use strict";var s=r(6154);let a="https://uno-game-server.glitch.me/api";t.Z=new class{login(e,t){return s.Z.post(a+"/user/login",{username:e,password:t})}logout(){localStorage.removeItem("user")}register(e,t,r,n,i){return s.Z.post(a+"/user/register",{username:e,email:t,password:r,gender:n,role:i})}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))||null}modifyUser(e,t,r,n,i){return s.Z.patch(a+"/user/modify/"+e,{username:t,email:r,password:n,gender:i})}deleteUser(e){return s.Z.delete(a+"/user/delete/"+e)}getGameData(e){return s.Z.get(a+"/gameData/"+e)}saveGameData(e){let{user:t,index:r,name:n,date:i,currentPlayer:l,currentPlayerQueue:o,isReverse:c,main:d,discard:u,p1:m,p2:h,p3:g,p4:p}=e;return s.Z.post(a+"/gameData/data",{user:t,index:r,name:n,date:i,currentPlayer:l,currentPlayerQueue:o,isReverse:c,main:d,discard:u,p1:m,p2:h,p3:g,p4:p})}deleteGameData(e,t){return s.Z.delete(a+"/gameData/"+e+"/"+t)}deleteGameDataAll(e){return s.Z.delete(a+"/gameData/"+e)}}}},function(e){e.O(0,[827,538,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);