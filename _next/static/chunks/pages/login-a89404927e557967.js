(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(4759)}])},4759:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(5893),a=s(7294),n=s(1163),i=s(4538),l=s(5753);function o(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(null),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[g,p]=(0,a.useState)("");return(0,r.jsx)(i.E.div,{initial:{opacity:0,y:-200},animate:{opacity:1,y:0},transition:{duration:.5},children:(0,r.jsxs)("div",{className:"form-body",children:[(0,r.jsxs)("div",{className:"form-holder",children:[(0,r.jsx)("div",{className:"back",onClick:()=>{e.push("/")},children:"Back"}),(0,r.jsx)("div",{className:"form-content",children:(0,r.jsxs)("div",{className:"form-items",children:[(0,r.jsx)("h3",{children:"Login"}),(0,r.jsx)("p",{children:"Remember to register first before login."}),(0,r.jsxs)("div",{className:"form",children:[g&&(0,r.jsxs)("div",{id:"InfoBanner",children:[(0,r.jsx)("span",{className:"reversed reversedRight",children:(0,r.jsx)("span",{children:"âš "})}),(0,r.jsx)("span",{className:"reversed reversedLeft",children:g})]}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("input",{className:"form-control",onChange:e=>{u(e.target.value)},type:"text",name:"username",placeholder:"Username",required:!0})}),(0,r.jsx)("div",{className:"col-md-12",children:(0,r.jsx)("input",{className:"form-control",onChange:e=>{h(e.target.value)},type:"password",name:"password",placeholder:"Password",required:!0})}),(0,r.jsx)("div",{className:"form-button mt-3",style:{display:"flex",justifyContent:"center"},children:(0,r.jsx)("button",{id:"submit",onClick:()=>{c(!0),l.Z.login(d,m).then(t=>{t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data)),c(!1),window.alert("Login successfully. You are redirected to the home page."),s(l.Z.getCurrentUser()),e.push("/"))}).catch(e=>{c(!1),p(e.response.data)})},className:"btn btn-primary",children:"Login"})})]})]})})]}),o&&(0,r.jsx)("div",{className:"notice",children:(0,r.jsx)("p",{children:"Sending Request..."})})]})})}},5753:function(e,t,s){"use strict";var r=s(6154);let a="https://uno-game-server.glitch.me/api";t.Z=new class{login(e,t){return r.Z.post(a+"/user/login",{username:e,password:t})}logout(){localStorage.removeItem("user")}register(e,t,s,n,i){return r.Z.post(a+"/user/register",{username:e,email:t,password:s,gender:n,role:i})}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))||null}modifyUser(e,t,s,n,i){return r.Z.patch(a+"/user/modify/"+e,{username:t,email:s,password:n,gender:i})}deleteUser(e){return r.Z.delete(a+"/user/delete/"+e)}getGameData(e){return r.Z.get(a+"/gameData/"+e)}saveGameData(e){let{user:t,index:s,name:n,date:i,img:l,currentPlayer:o,currentPlayerQueue:c,isReverse:d,main:u,discard:m,p1:h,p2:g,p3:p,p4:f}=e;return r.Z.post(a+"/gameData/data",{user:t,index:s,name:n,date:i,img:l,currentPlayer:o,currentPlayerQueue:c,isReverse:d,main:u,discard:m,p1:h,p2:g,p3:p,p4:f})}deleteGameData(e,t){return r.Z.delete(a+"/gameData/"+e+"/"+t)}}}},function(e){e.O(0,[827,538,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);