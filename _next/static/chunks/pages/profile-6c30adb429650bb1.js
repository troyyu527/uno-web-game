(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9344:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return r(7329)}])},7329:function(e,s,r){"use strict";r.r(s);var a=r(5893),n=r(7294),t=r(1163),l=r(5753);s.default=function(){let e=(0,t.useRouter)(),[s,r]=(0,n.useState)(l.Z.getCurrentUser()||{}),[c,i]=(0,n.useState)(!1),[d,o]=(0,n.useState)((null==s?void 0:s.user)||""),[m,u]=(0,n.useState)((null==s?void 0:s.email)||""),[_,h]=(0,n.useState)((null==s?void 0:s.password)||""),[p,x]=(0,n.useState)((null==s?void 0:s.gender)||""),[j,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(""),N=()=>{e.push("/")},b=e=>{j?(i(!0),l.Z.modifyUser(s._id,d,m,_,p).then(()=>{s.user=d,s.email=m,s.password=_,s.gender=p,localStorage.setItem("user",JSON.stringify(s)),i(!1),g(!1)}).catch(e=>{i(!1),v(e.response.data)})):g(!j)},y=e=>{x(e.target.value)};return(0,n.useEffect)(()=>{s||N()},[s]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"form-body",children:[(0,a.jsxs)("div",{className:"form-holder",children:[(0,a.jsx)("div",{className:"back",onClick:N,children:"Back"}),(0,a.jsx)("div",{className:"form-content",children:(0,a.jsxs)("div",{className:"form-items",children:[(0,a.jsx)("h3",{children:"Account Info"}),j?(0,a.jsx)("p",{children:"Please Fill Your New Information."}):(0,a.jsx)("p",{children:"Here Is Your Account Information."}),(0,a.jsx)("p",{style:{marginTop:"-20px"},children:"_________________________________________________________________"}),(0,a.jsxs)("div",{className:"form",children:[!j&&(0,a.jsxs)("div",{className:"account",children:[(0,a.jsxs)("div",{className:"account-info",children:[(0,a.jsxs)("p",{children:["User: ",d]}),(0,a.jsxs)("p",{children:["Email: ",m]}),(0,a.jsx)("p",{children:"Password: (Hidden)"}),(0,a.jsxs)("p",{children:["Gender: ",p]}),(0,a.jsxs)("p",{children:["Role: ",(null==s?void 0:s.role)||"Member"]})]}),(0,a.jsxs)("div",{className:"btn-container",children:[(0,a.jsx)("div",{className:"btn-form",onClick:b,children:"Modify"}),(0,a.jsx)("div",{className:"btn-form",onClick:r=>{let a=confirm("Are You Sure To Delete This Account?");a&&(i(!0),l.Z.deleteUser(s._id).then(()=>{i(!1),localStorage.removeItem("user"),e.push("/")}).catch(e=>{i(!1),v(e.response.data)}))},children:"Delete"})]})]}),j&&(0,a.jsxs)(a.Fragment,{children:[f&&(0,a.jsxs)("div",{id:"InfoBanner",children:[(0,a.jsx)("span",{className:"reversed reversedRight",children:(0,a.jsx)("span",{children:"âš "})}),(0,a.jsx)("span",{className:"reversed reversedLeft",children:f})]}),(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("p",{style:{marginBottom:"-10px",marginTop:"10px"},children:"Username"}),(0,a.jsx)("input",{className:"form-control",onChange:e=>{o(e.target.value)},type:"text",name:"username",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("p",{style:{marginBottom:"-10px",marginTop:"10px"},children:"Email"}),(0,a.jsx)("input",{className:"form-control",onChange:e=>{u(e.target.value)},type:"email",name:"email",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-12",children:[(0,a.jsx)("p",{style:{marginBottom:"-10px",marginTop:"10px"},children:"Password"}),(0,a.jsx)("input",{className:"form-control",onChange:e=>{h(e.target.value)},type:"password",name:"password",required:!0})]}),(0,a.jsxs)("div",{className:"col-md-12 mt-3",style:{marginTop:"15px",display:"flex",alignItems:"center"},children:[(0,a.jsx)("label",{className:"mb-3 mr-1",for:"gender",children:"Gender: "}),(0,a.jsx)("input",{type:"radio",onClick:y,checked:"Male"===p,value:"Male",className:"btn-check",name:"gender",id:"male"}),(0,a.jsx)("label",{className:"btn btn-sm btn-outline-secondary",for:"male",children:"Male"}),(0,a.jsx)("input",{type:"radio",onClick:y,checked:"Female"===p,value:"Female",className:"btn-check",name:"gender",id:"female"}),(0,a.jsx)("label",{className:"btn btn-sm btn-outline-secondary",for:"female",children:"Female"}),(0,a.jsx)("input",{type:"radio",onClick:y,checked:"Secret"===p,value:"Secret",className:"btn-check",name:"gender",id:"secret"}),(0,a.jsx)("label",{className:"btn btn-sm btn-outline-secondary",for:"secret",children:"Secret"})]}),(0,a.jsx)("div",{className:"btn-container",children:(0,a.jsx)("div",{className:"btn-form",onClick:b,children:"Save"})})]})]})]})})]}),c&&(0,a.jsx)("div",{className:"notice",children:(0,a.jsx)("p",{children:"Sending Request..."})})]})})}},5753:function(e,s,r){"use strict";var a=r(6154);let n="https://uno-game-server.glitch.me/api";s.Z=new class{login(e,s){return a.Z.post(n+"/user/login",{username:e,password:s})}logout(){localStorage.removeItem("user")}register(e,s,r,t,l){return a.Z.post(n+"/user/register",{username:e,email:s,password:r,gender:t,role:l})}getCurrentUser(){return JSON.parse(localStorage.getItem("user"))||null}modifyUser(e,s,r,t,l){return a.Z.patch(n+"/user/modify/"+e,{username:s,email:r,password:t,gender:l})}deleteUser(e){return a.Z.delete(n+"/user/delete/"+e)}getGameData(e){return a.Z.get(n+"/gameData/"+e)}saveGameData(e){let{user:s,index:r,name:t,date:l,img:c,currentPlayer:i,currentPlayerQueue:d,isReverse:o,main:m,discard:u,p1:_,p2:h,p3:p,p4:x}=e;return a.Z.post(n+"/gameData/data",{user:s,index:r,name:t,date:l,img:c,currentPlayer:i,currentPlayerQueue:d,isReverse:o,main:m,discard:u,p1:_,p2:h,p3:p,p4:x})}deleteGameData(e,s){return a.Z.delete(n+"/gameData/"+e+"/"+s)}}}},function(e){e.O(0,[827,774,888,179],function(){return e(e.s=9344)}),_N_E=e.O()}]);